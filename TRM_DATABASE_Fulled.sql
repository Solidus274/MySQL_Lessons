-- Ѕаза данных предназначена дл€ контрол€ жизненного цикла документации. 
-- ¬ нее вход€т таблицы кодов, статусов, ответственных за рассмотрение (custodians), поставивших задачу (contributors),
-- –азличных накладных а также характеристик полученных документов. Ѕаза должна хранить и структурировать информацию по 
-- документообороту и позвол€ть выгружать отчеты  по просрочке рассмотрени€ документации

-- Ѕаза сделана по образу существующей боевой Ѕƒ на основе MS Access


DROP DATABASE IF EXISTS TRM;
CREATE DATABASE TRM;
USE TRM;


DROP TABLE IF EXISTS `issue_reasones`;
CREATE TABLE `issue_reasones` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `reason` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  INDEX reason_idx(reason),
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=14 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO `issue_reasones` VALUES ('9','IFR'),
('10','IFD'),
('11','IFI'),
('12','IFC'),
('13','IFQ'); 


DROP TABLE IF EXISTS `languages`;
CREATE TABLE `languages` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `language` char(2) COLLATE utf8_unicode_ci DEFAULT NULL,
  INDEX lang_name_idx(language),
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=14 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO `languages` VALUES ('9','pt'),
('10','fr'),
('11','en'),
('12','de'),
('13','ru'); 


DROP TABLE IF EXISTS `rev_statuses`;
CREATE TABLE `rev_statuses` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `status` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  INDEX rew_st_idx(status),
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO `rev_statuses` VALUES ('9','last version'),
('10','superseded'),
('11','rejected'); 


DROP TABLE IF EXISTS `review_codes`;
CREATE TABLE `review_codes` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `code` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  INDEX rev_code_idx(code),
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=14 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO `review_codes` VALUES ('9','A'),
('10',' Q'),
('11',' B'),
('12',' C'),
('13',' D'),
('14', 'Under review'); 


DROP TABLE IF EXISTS `review_statuses`;
CREATE TABLE `review_statuses` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `status` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  INDEX rev_st_idx(status),
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=14 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO `review_statuses` VALUES ('9',' UnderReview'),
('10',' Rejected'),
('11','In Consolidation'),
('12','In Commenting'),
('13',' Completed'); 


DROP TABLE IF EXISTS `revisions`;
CREATE TABLE `revisions` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `revision` int(6) DEFAULT NULL,
  INDEX rev_idx(revision),
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=59 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO `revisions` VALUES ('9','28'),
('10','6'),
('11','36'),
('12','30'),
('13','18'),
('14','10'),
('15','33'),
('16','17'),
('17','44'),
('18','24'),
('19','27'),
('20','5'),
('21','7'),
('22','29'),
('23','4'),
('24','49'),
('25','15'),
('26','34'),
('27','47'),
('28','8'),
('29','13'),
('30','9'),
('31','22'),
('32','16'),
('33','14'),
('34','46'),
('35','3'),
('36','11'),
('37','41'),
('38','38'),
('39','25'),
('40','42'),
('41','20'),
('42','45'),
('43','35'),
('44','1'),
('45','19'),
('46','31'),
('47','21'),
('48','32'),
('49','23'),
('50','37'),
('51','12'),
('52','48'),
('53','40'),
('54','26'),
('55','50'),
('56','43'),
('57','2'),
('58','39'); 


DROP TABLE IF EXISTS `contributors`;
CREATE TABLE `contributors` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `firstname` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  `lastname` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  `email` varchar(120) COLLATE utf8_unicode_ci DEFAULT NULL,
  `position` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  `grade` int(20) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `email` (`email`),
  KEY `users_firstname_lastname_idx` (`firstname`,`lastname`)
) ENGINE=InnoDB AUTO_INCREMENT=26 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO `contributors` VALUES ('1','Daron','Steuber','danielle12@example.net','5','24'),
('2','May','Bailey','efrain.streich@example.net','2','20'),
('3','Sandrine','Thiel','brohan@example.org','4','24'),
('4','Caden','Ledner','ken.heller@example.com','5','22'),
('5','Carmelo','Rolfson','mrunolfsdottir@example.net','5','21'),
('6','Norberto','Schmitt','ecummerata@example.com','1','18'),
('7','Haven','Sporer','pwelch@example.net','5','18'),
('8','Frederik','Pagac','cole62@example.org','4','21'),
('9','Carmelo','Dibbert','louvenia.lebsack@example.org','3','15'),
('10','Angus','King','ocie59@example.com','4','17'),
('11','Johathan','Bailey','ebba40@example.com','5','23'),
('12','Milford','Fahey','adelbert.lehner@example.com','4','19'),
('13','Desmond','Carter','okuneva.marlin@example.net','1','21'),
('14','Kieran','Powlowski','haley.janae@example.com','1','21'),
('15','Ila','Doyle','kpouros@example.org','3','22'),
('16','Reed','Hilll','woodrow.deckow@example.org','3','22'),
('17','Jane','Lynch','thea15@example.org','2','15'),
('18','Jacynthe','Goyette','isaias21@example.com','4','21'),
('19','Leland','Schulist','kaylin.schinner@example.net','1','25'),
('20','Flavio','Ledner','leannon.abigayle@example.com','2','24'),
('21','Gisselle','Marvin','danielle.walsh@example.org','3','19'),
('22','Blaise','Schuppe','natalie98@example.com','2','18'),
('23','Dallin','Douglas','rosenbaum.josianne@example.com','3','20'),
('24','Barney','Harber','albina43@example.net','5','24'),
('25','Haven','Moore','bradford86@example.net','1','17'); 

DROP TABLE IF EXISTS `disciplines`;
CREATE TABLE `disciplines` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `discipline` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  INDEX disc_name_idx(discipline),
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=19 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO `disciplines` VALUES ('9','SaddleBrown'),
('10','OrangeRed'),
('11','LightYellow'),
('12','DarkSlateGray'),
('13','SteelBlue'),
('14','SeaShell'),
('15','MediumTurquoise'),
('16','DeepPink'),
('17','DarkGreen'),
('18','SlateBlue'); 


DROP TABLE IF EXISTS `custodians`;
CREATE TABLE `custodians` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `firstname` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  `lastname` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  `email` varchar(120) COLLATE utf8_unicode_ci DEFAULT NULL,
  `discipline_id` bigint(20) unsigned NOT NULL,
  FOREIGN KEY (discipline_id) REFERENCES disciplines(id)
      	ON UPDATE CASCADE
    	ON DELETE restrict,
  PRIMARY KEY (`id`),
  UNIQUE KEY `email` (`email`),
  KEY `users_firstname_lastname_idx` (`firstname`,`lastname`)
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO `custodians` VALUES ('1','Josefina','Zboncak','gardner84@example.net','9'),
('2','Shakira','Rau','mante.kenny@example.org','10'),
('3','Dudley','McClure','schmidt.marcelle@example.org','11'),
('4','Alycia','Hills','khickle@example.com','12'),
('5','Hallie','Mertz','kirlin.virginia@example.org','13'),
('6','Colby','Aufderhar','uankunding@example.org','14'),
('7','Alexandro','Carroll','kmaggio@example.com','15'),
('8','Cleveland','Wuckert','savanna78@example.com','16'),
('9','Bennett','Koss','kuphal.cali@example.net','17'),
('10','Mose','DuBuque','feest.melba@example.com','18'); 



DROP TABLE IF EXISTS `AFC_TRMs`;
CREATE TABLE `AFC_TRMs` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(150) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime DEFAULT current_timestamp(),
  `contributor_id` bigint(20) unsigned NOT NULL,
  INDEX afc_name_idx(name),
  FOREIGN KEY (contributor_id) REFERENCES contributors(id)
      	ON UPDATE CASCADE
    	ON DELETE restrict,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=26 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO `AFC_TRMs` VALUES ('1','3b1bf8fc-1b7a-3219-a537-b4b4fb842e28','1987-10-31 03:29:37','1'),
('2','ccc3fc31-fde9-39cb-b510-330bd1d3d0dd','1980-02-01 13:59:31','2'),
('3','7c16c9d7-3087-36bf-8b29-de7983023276','1984-04-09 08:13:11','3'),
('4','5301f56a-958c-3070-8751-f12085d637f3','2011-03-01 21:21:25','4'),
('5','23e3ef5d-d8e0-30e5-9dca-d033fce08cd1','1983-05-29 11:47:06','5'),
('6','8633c81d-2cd1-3cf2-aaaf-0a838c3ad7e4','1995-07-18 13:02:48','6'),
('7','47d49a11-7f3c-3114-9742-00c86e25d743','2018-03-18 11:46:35','7'),
('8','7d736ea1-4df3-3b3d-9bf0-893e7799168c','1976-01-08 11:57:10','8'),
('9','d1322e7f-4bac-3844-a23b-f2ba5069581b','2018-03-08 14:57:29','9'),
('10','a2b88139-2751-33dd-bab4-c66d29010cf2','2017-05-26 12:41:11','10'),
('11','5347110c-b87d-3e78-883c-70223f76a30d','2009-07-23 14:37:17','11'),
('12','0481c7df-ba80-310c-abfc-3124e544ba0e','1993-09-07 01:44:43','12'),
('13','b24f4cee-3896-30a0-9159-56a58eef6705','1979-10-30 03:14:00','13'),
('14','faf4dc9a-c297-377e-93be-b8b47b2f36a1','2017-04-09 03:36:04','14'),
('15','e42362cb-75d5-36f5-b60f-fcb593e9ec0d','1977-04-19 21:40:21','15'),
('16','ee7f6174-e16e-35a3-aaac-4e6298244c04','2013-07-18 04:33:00','16'),
('17','c60e4d47-5d18-362a-ac98-5baa404d8a46','2008-07-08 06:34:00','17'),
('18','54deb185-aa73-3cc0-b19c-a8858ac6ef0c','1988-08-26 20:08:30','18'),
('19','1bb314ca-700f-3e53-b145-2b449e77eac2','2009-07-26 01:12:40','19'),
('20','8bcc681c-5f15-32f4-b7ac-3bd2e9b61cf3','1974-02-20 01:54:57','20'),
('21','a5839788-756d-38ce-a68d-321025d4e48e','1987-02-17 13:42:17','21'),
('22','0a0a9718-48f9-3d47-9d52-1fe4be490c3f','2014-09-27 05:48:01','22'),
('23','c765d6f1-1f05-37fa-93cf-e1ac6e3d27d0','1987-11-30 21:19:11','23'),
('24','a188b62f-cf50-32f5-8265-2300bc98b7d3','1983-12-17 16:04:49','24'),
('25','6121a7f3-05e2-3a5a-b4d3-97ba443872ca','1981-12-26 02:29:11','25'); 


DROP TABLE IF EXISTS `HC_TRMs`;
CREATE TABLE `HC_TRMs` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(150) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime DEFAULT current_timestamp(),
  `contributor_id` bigint(20) unsigned NOT NULL,
  `num_of_sheets` int(5) DEFAULT NULL,
  `format` char(2) COLLATE utf8_unicode_ci DEFAULT NULL,
  INDEX hc_name_idx(name),
  FOREIGN KEY (contributor_id) REFERENCES contributors(id)
      	ON UPDATE CASCADE
    	ON DELETE restrict,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=26 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO `HC_TRMs` VALUES ('1','1874382199916','1992-09-28 21:19:35','1','20','b'),
('2','5647091088613','1989-02-12 00:26:47','2','3','e'),
('3','8202860453176','1991-05-01 19:37:40','3','8','e'),
('4','4036078850687','1977-06-24 23:56:37','4','25','y'),
('5','1155123251668','1988-06-10 20:18:51','5','15','j'),
('6','4224832976999','2013-10-09 15:49:14','6','47','r'),
('7','4246684448967','2005-05-21 07:41:10','7','19','b'),
('8','8080887431908','1983-12-04 17:59:49','8','24','o'),
('9','0493760185337','1978-10-23 20:20:07','9','38','s'),
('10','7604126766579','1980-06-01 04:56:00','10','2','u'),
('11','5939465685703','2006-09-30 03:33:53','11','17','l'),
('12','5003636615780','1974-05-06 17:32:45','12','46','h'),
('13','6458815459652','2019-12-14 21:56:49','13','14','s'),
('14','2486624537876','2006-06-01 16:24:28','14','24','a'),
('15','3115928237753','2001-09-15 00:52:17','15','31','v'),
('16','2434772660229','2011-10-08 08:17:21','16','19','z'),
('17','4904031830444','2013-08-31 23:34:25','17','45','c'),
('18','0326377902953','1988-06-14 06:18:48','18','22','u'),
('19','0695085037630','2011-05-22 02:32:58','19','32','a'),
('20','6027841996501','1974-06-20 06:04:51','20','8','n'),
('21','7243123882259','1998-05-14 04:01:27','21','36','r'),
('22','6222434737787','1978-09-30 04:27:36','22','11','y'),
('23','1964119468627','2018-07-22 13:17:25','23','40','u'),
('24','4618201525749','1999-08-14 07:28:07','24','32','y'),
('25','4325017100915','2006-09-10 21:14:07','25','32','x'); 


DROP TABLE IF EXISTS `Incoming_TRMs`;
CREATE TABLE `Incoming_TRMs` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(150) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime DEFAULT current_timestamp(),
  `contributor_id` bigint(20) unsigned NOT NULL,
  `custodian_id` bigint(20) unsigned NOT NULL,
  `issue_reason_id` bigint(20) unsigned NOT NULL,
  FOREIGN KEY (contributor_id) REFERENCES contributors(id)
      	ON UPDATE CASCADE
    	ON DELETE restrict,
  FOREIGN KEY (custodian_id) REFERENCES custodians(id)
      	ON UPDATE CASCADE
    	ON DELETE restrict,
  FOREIGN KEY (issue_reason_id) REFERENCES issue_reasones(id)
      	ON UPDATE CASCADE
    	ON DELETE restrict,
  INDEX inc_name_idx(name),
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=101 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO `Incoming_TRMs` VALUES ('1','4bd0093c2b01251a830744890608db7b','1972-10-10 16:43:39','1','1','9'),
('2','2f3a8b5cd4d315db931a92bdad29f103','1971-10-13 03:56:30','2','2','10'),
('3','0157e6d6048443a50d7998ddc43e1f17','1977-08-05 18:29:25','3','3','11'),
('4','7695ade8a4ad40df3b70f735948d255c','2005-06-08 21:56:06','4','4','12'),
('5','0699f87c81098ba176738a7465722fda','2009-05-21 23:24:07','5','5','13'),
('6','39b30fe487190ce41bf2b9b847e3c49d','1974-01-10 14:45:58','6','6','9'),
('7','17ee3937e0a428cd7257bd02a757f95b','1982-04-14 02:32:24','7','7','10'),
('8','a442cbc23103b14b261f78ad4cddc4d6','2008-10-12 12:26:57','8','8','11'),
('9','cad9d9eecae4be83263d948a2455c33b','1993-03-21 22:40:52','9','9','12'),
('10','f02a5b2464be483584a3aca1a5337455','1977-07-20 05:22:24','10','10','13'),
('11','4e666f84ffd53dfd7271feb7a567200d','1999-08-03 19:17:05','11','1','9'),
('12','660b4e9cba3f7f030abade8177b4b40f','2001-01-03 20:38:12','12','2','10'),
('13','bc8d592a9938bb831f351bf122f2311e','1998-07-13 01:54:27','13','3','11'),
('14','e88e74936cc302e9c8f07e51d3fd192d','1973-08-29 02:59:00','14','4','12'),
('15','c1617978cff8d6c38bf36fbba796d25e','1986-01-19 21:05:59','15','5','13'),
('16','d0b1e28b25b7eed59e2b284c2a35b997','2003-12-04 00:10:38','16','6','9'),
('17','b6020b83a302f65a37e77b862a024c81','2013-07-28 02:23:07','17','7','10'),
('18','8d5cd36852220af6845156315bc60d87','2002-08-04 19:39:07','18','8','11'),
('19','c405d76b9d55355dfec5c230c56569aa','2016-04-24 04:00:29','19','9','12'),
('20','4b4ccb7909ed05fea11b3bfe19497dc4','1979-08-08 07:50:15','20','10','13'),
('21','7966bb940f61e67f67b8fdaf1922effd','1994-12-08 10:44:10','21','1','9'),
('22','289be38b1c185dd8706e8d0958c37f73','2008-03-03 22:00:52','22','2','10'),
('23','0105bc2a23b379937909e3b24729c2d8','2000-04-25 00:19:31','23','3','11'),
('24','31768578d98539cd67001d681ad21dd1','1978-02-22 18:14:19','24','4','12'),
('25','5eb41adf3b9d8a78a49ccc5af016fffc','2008-05-19 14:48:53','25','5','13'),
('26','b726aea7c33d9face9df91379549e235','2006-10-21 10:09:13','1','6','9'),
('27','2623c6cf64700bbf6b9b61fcc56944fe','2004-06-29 22:44:57','2','7','10'),
('28','0e059ff0dee57fcc2dfe5671026731cf','1976-06-11 11:17:45','3','8','11'),
('29','2e64a6334bba43e1816ab21bbe693839','2017-04-29 06:39:34','4','9','12'),
('30','a39a87ecfa5bee39d0b76e5d04364c67','1995-01-09 08:37:40','5','10','13'),
('31','1c2bd9b4b7ece4234035e6e56b4f484d','2004-03-08 01:09:27','6','1','9'),
('32','22b7c992ab5bf05d5216de03c3b8c304','1983-10-03 10:03:53','7','2','10'),
('33','7d7d248e9c1da0d33036f09c98fa2338','2019-02-09 05:27:13','8','3','11'),
('34','96e3c375ca27bbe797779d7011709c6f','2012-06-09 11:28:37','9','4','12'),
('35','23c142eeb8861f8b1ef044f04e208804','1991-05-14 12:01:49','10','5','13'),
('36','14f975cb670e270e79f465dc9095f70f','2004-07-05 01:02:15','11','6','9'),
('37','0a5c2a6bec17b79bdcf660b2bf21fe3a','2017-03-21 07:46:03','12','7','10'),
('38','574aa7883eca57ba2d90caee180f6378','1987-03-20 14:37:47','13','8','11'),
('39','02d65a5aff30010a0a1f593182dbc545','2019-12-02 21:47:01','14','9','12'),
('40','c5762bc5680c71338f530aa1d2193d26','1978-04-19 16:37:57','15','10','13'),
('41','668730f74dcded7c00a8b91217ee376d','1998-08-08 04:14:07','16','1','9'),
('42','5a583dbfee0232503ad18cf0298e5c35','2010-06-30 00:20:34','17','2','10'),
('43','aad64722b5f96fd6b599a3ec76b5a515','1980-07-31 22:39:38','18','3','11'),
('44','69e7aa35387dfc70ba0b65567860e9aa','1970-01-07 07:45:32','19','4','12'),
('45','312c1f4e9a3151b93af75fc6d5c65add','1971-03-31 23:39:55','20','5','13'),
('46','553c86f8862b15c5457eb1a8c6cdff08','1976-03-14 10:22:34','21','6','9'),
('47','4fe90832deb15a03e05d1cce781bc003','1972-05-24 21:48:00','22','7','10'),
('48','3a2ccee3d3cb3439d15e90e0eb2bccc1','2003-06-28 10:02:06','23','8','11'),
('49','7c11e7324789564d10ca4f66dbf28f56','1973-10-08 05:24:00','24','9','12'),
('50','1746757086b5ffd08691cee933408274','2013-11-02 21:58:51','25','10','13'),
('51','a7ea79976e2a1b01f8a7f5cdb86eb4aa','1987-08-03 17:24:27','1','1','9'),
('52','6713378ff3ba07d9ad4a10a2bdb582bd','1976-02-11 00:55:32','2','2','10'),
('53','da25d1ef8c14ad780adc08a7bbb078e4','1971-01-04 14:20:18','3','3','11'),
('54','53922f8ec32baf3ac4084b4b80925e0c','1985-09-29 14:12:34','4','4','12'),
('55','d9f8d333d23dde8434769aca693b752d','1991-05-07 10:03:57','5','5','13'),
('56','43dce9cb3ec2945636ecd560c80e9c7e','2015-08-30 13:16:06','6','6','9'),
('57','4090370147fb27d764aa4475bb39c318','2001-01-22 18:19:31','7','7','10'),
('58','1dec7ec9473acffc66603ea0c033160a','1986-07-05 18:50:01','8','8','11'),
('59','66ad29e59cb1eb299e88f076bcf41ce2','1982-09-28 23:56:07','9','9','12'),
('60','d5930d9f6833f6ebb80f3220bddde7e4','2008-10-11 17:02:46','10','10','13'),
('61','4fb985f460db4728fadb310a5543c803','1988-10-11 16:19:56','11','1','9'),
('62','9fccf8d34d5584a2e9efd2bda8a431d2','2002-09-17 00:42:49','12','2','10'),
('63','c5ec9f61c6a7051e0129f9ddf005b4d1','2011-11-09 22:19:24','13','3','11'),
('64','6a8e91a4d4f64dd1f1d0c70a7fdac5b9','2003-08-08 10:50:05','14','4','12'),
('65','8361fa14567d28f0cdf32bd1bd64ad7b','1997-01-06 02:06:27','15','5','13'),
('66','1e0abc2351a3ba68742dbf9cd4df517f','2005-02-26 07:18:06','16','6','9'),
('67','a5fceeb34406ba3da693c1551e7ed349','2005-05-23 21:47:15','17','7','10'),
('68','1a8cf38490910639e04a9335e8fab47e','1994-09-11 18:20:35','18','8','11'),
('69','31239c0aa0efa92bf724b909403832b3','1994-02-08 01:18:44','19','9','12'),
('70','bcb35e8a2739058d23f9c166fd31e4f6','2010-05-02 02:20:15','20','10','13'),
('71','23dc69bd50f8ba5a88e646702785b333','2016-07-27 13:15:52','21','1','9'),
('72','b03f8650f660c2cefa8ca80f17886e57','1996-05-31 01:28:53','22','2','10'),
('73','408c2cec0aca925bc21dabb6e2576892','1998-05-31 02:01:21','23','3','11'),
('74','3b90aedcae386b50eb9a5c69a6f479f6','2008-10-08 14:32:08','24','4','12'),
('75','6f1557d75c5836a8f91d3159a7b3f7d1','1978-10-11 17:14:36','25','5','13'),
('76','0f94bb78df6a612627269cb7bd88f6cf','2007-08-10 23:02:33','1','6','9'),
('77','9accfd899f92897aa7677454334bb5ad','2005-06-09 05:55:55','2','7','10'),
('78','10e1ec7e8842bbb753c0e5fe64ff80f8','1987-08-18 11:59:06','3','8','11'),
('79','6d6c212c7045006b1fa07db2f0e29424','1999-04-24 20:04:48','4','9','12'),
('80','473f030ffcfa13493cb3f29702a05d4f','2007-06-01 09:25:54','5','10','13'),
('81','52f1c251075a28e99189752089cb22a1','1986-09-12 17:41:22','6','1','9'),
('82','f39e55e4929ee9a0c34436d743b1084e','1977-12-15 23:43:42','7','2','10'),
('83','e0936732965b8c4bdef6c10c16c5ce7b','2010-02-01 08:52:37','8','3','11'),
('84','6083bd9981625dd6cd237e82d0849a04','2003-12-06 14:38:52','9','4','12'),
('85','64de3b4ceda2ab573dbb9767aa425bb9','1988-04-16 10:23:02','10','5','13'),
('86','09b9bf1e88781b9cb01bc314876210df','2010-03-06 01:11:18','11','6','9'),
('87','2a6ad0a5de6ea5e3659fe2f691232df9','1979-11-17 03:02:15','12','7','10'),
('88','294df5d5c5252b12cb65fa56d77fdaa7','2018-12-14 16:13:12','13','8','11'),
('89','4d1dd2c85d386209f6288b8f30440ac5','2009-06-13 06:58:24','14','9','12'),
('90','04ac6e322fdb84555fc31e3531fab6ac','2006-11-06 17:34:31','15','10','13'),
('91','bb9dc20f232a8477ded50df87b0265c3','2005-09-05 01:28:32','16','1','9'),
('92','13b8b8488625aeada661a9729b1e7e9d','1996-03-31 01:09:28','17','2','10'),
('93','3503b99402dd9ca15e7147779dd1a521','2017-09-07 19:22:55','18','3','11'),
('94','bf3c8dc609147b3dd725527fec083f9b','1988-08-07 02:22:17','19','4','12'),
('95','17c28801cfe10e1f0d0731e8144ea10c','2011-03-13 09:58:57','20','5','13'),
('96','142862c5f5b562e6de492e291c205e2c','2019-11-18 07:10:43','21','6','9'),
('97','ba2207e1d40c81f3c92feb4668db827f','1976-04-20 06:31:03','22','7','10'),
('98','f15199b1d292bd29da546cc8d0b9828a','1981-10-11 10:07:34','23','8','11'),
('99','7ab634add9969cf6bafcca5f3364ce11','1982-05-12 12:29:46','24','9','12'),
('100','d23169f3d5feb456e0bc07b44da6a7a9','1977-08-21 11:32:47','25','10','13'); 


DROP TABLE IF EXISTS `Review_TRMs`;
CREATE TABLE `Review_TRMs` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(150) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created_at` datetime DEFAULT current_timestamp(),
  `contributor_id` bigint(20) unsigned NOT NULL,
  `custodian_id` bigint(20) unsigned NOT NULL,
  `review_code_id` bigint(20) unsigned NOT NULL,
  `plan_rev_date` datetime DEFAULT NULL,
  `fact_rev_date` datetime DEFAULT NULL,
  `review_status_id` bigint(20) unsigned NOT NULL,
  INDEX rtrm_name_idx(name),
  FOREIGN KEY (contributor_id) REFERENCES contributors(id)
      	ON UPDATE CASCADE
    	ON DELETE restrict,
  FOREIGN KEY (custodian_id) REFERENCES custodians(id)
      	ON UPDATE CASCADE
    	ON DELETE restrict,
  FOREIGN KEY (review_code_id) REFERENCES review_codes(id),
  FOREIGN KEY (review_status_id) REFERENCES review_statuses(id)
      	ON UPDATE CASCADE,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=101 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO `Review_TRMs` VALUES ('1','minus','1974-05-17 08:18:25','1','1','9','1996-04-26 01:30:17','2000-11-21 22:33:48','9'),
('2','nemo','2017-03-18 03:23:13','2','2','10','2001-05-07 01:07:52','1986-12-21 19:03:02','10'),
('3','dolorem','2002-05-29 01:25:38','3','3','11','2009-02-24 21:36:56','2016-03-16 05:04:05','11'),
('4','sunt','1993-10-19 09:42:20','4','4','12','1975-06-10 14:00:32','2006-05-27 10:16:06','12'),
('5','quod','1995-02-27 19:54:49','5','5','13','2017-10-14 23:38:48','2009-07-13 09:43:48','13'),
('6','veniam','1972-01-26 04:13:11','6','6','9','2004-05-20 08:29:22','2002-07-24 01:44:25','9'),
('7','illo','1990-11-04 09:45:40','7','7','10','2013-06-03 23:07:35','2012-12-02 08:31:39','10'),
('8','sapiente','1992-01-08 16:09:06','8','8','11','1983-08-26 11:05:00','2013-08-22 13:10:29','11'),
('9','quam','2013-07-13 18:44:23','9','9','12','1987-03-09 12:53:08','1976-01-24 08:16:54','12'),
('10','voluptatum','2018-04-28 19:10:24','10','10','13','1995-07-25 16:23:48','1993-10-18 10:26:17','13'),
('11','corporis','2012-05-26 06:52:57','11','1','9','1985-10-06 06:18:04','1998-04-15 17:39:37','9'),
('12','exercitationem','1986-09-03 03:36:29','12','2','10','1989-12-08 07:59:58','1975-05-22 06:24:10','10'),
('13','quia','1977-01-12 15:12:48','13','3','11','2013-02-03 05:40:57','1998-10-03 00:55:48','11'),
('14','assumenda','1977-04-23 16:30:31','14','4','12','2011-11-06 09:44:51','1981-02-12 08:16:14','12'),
('15','magni','1977-10-07 05:37:42','15','5','13','1984-07-28 16:21:10','2018-05-03 03:23:53','13'),
('16','et','1983-10-01 10:11:39','16','6','9','2010-05-03 16:20:04','1971-09-08 18:50:52','9'),
('17','a','1976-10-04 16:29:33','17','7','10','2019-11-30 21:55:14','1989-10-16 20:39:32','10'),
('18','quia','1984-09-27 04:42:40','18','8','11','2010-06-20 16:12:02','2009-04-01 15:40:34','11'),
('19','placeat','2013-12-11 01:38:04','19','9','12','1990-09-12 21:47:50','1986-12-10 18:55:15','12'),
('20','itaque','1991-03-10 11:12:59','20','10','13','1975-05-23 04:57:30','2005-01-17 17:29:16','13'),
('21','dolorum','2003-02-27 01:20:53','21','1','9','1980-04-18 03:35:37','1978-08-11 14:53:22','9'),
('22','optio','1988-02-05 05:45:31','22','2','10','2000-09-19 20:55:30','1975-01-23 03:56:53','10'),
('23','est','1988-11-20 16:59:29','23','3','11','1972-09-06 01:52:19','2018-01-21 06:50:27','11'),
('24','vel','1972-09-14 16:48:30','24','4','12','2007-11-10 01:49:35','2012-10-24 04:34:17','12'),
('25','harum','2000-08-27 13:14:25','25','5','13','2011-08-21 02:02:19','1991-07-27 13:24:29','13'),
('26','error','1973-09-09 09:20:36','1','6','9','2000-05-19 06:37:29','1993-06-19 15:18:37','9'),
('27','et','2013-10-20 09:19:21','2','7','10','1997-11-28 12:56:27','2010-06-02 09:19:50','10'),
('28','et','1987-05-04 22:29:08','3','8','11','2011-03-19 05:30:27','1987-06-22 13:55:22','11'),
('29','iusto','1998-06-01 20:44:29','4','9','12','2013-05-31 17:02:10','1975-01-04 23:48:10','12'),
('30','quia','1983-12-20 14:04:37','5','10','13','2018-07-24 22:27:41','1990-02-10 01:13:15','13'),
('31','rerum','1997-12-27 23:16:05','6','1','9','1992-04-10 13:24:17','1986-12-13 05:46:32','9'),
('32','est','2018-11-19 00:33:49','7','2','10','2002-01-25 15:13:12','1988-07-23 12:59:38','10'),
('33','est','1999-07-20 23:04:01','8','3','11','2018-06-14 01:38:32','1989-05-11 18:43:38','11'),
('34','at','1974-04-15 01:28:35','9','4','12','2004-05-14 10:07:35','1976-07-21 06:24:24','12'),
('35','voluptate','1977-10-09 05:29:59','10','5','13','2002-05-31 12:23:14','2011-05-07 18:02:38','13'),
('36','veniam','1976-09-02 01:30:11','11','6','9','2005-12-15 19:34:28','1971-07-12 21:51:51','9'),
('37','illo','1979-10-12 03:35:16','12','7','10','2007-01-29 21:33:27','2006-09-22 16:43:56','10'),
('38','consequatur','1988-08-09 09:41:43','13','8','11','1978-08-27 15:22:13','1997-04-20 01:25:12','11'),
('39','aut','1981-08-26 04:19:37','14','9','12','1998-03-23 06:56:46','2007-07-15 04:31:25','12'),
('40','recusandae','1973-02-04 00:01:02','15','10','13','2010-07-29 12:24:29','1986-05-26 14:29:46','13'),
('41','laborum','2010-11-27 11:00:06','16','1','9','2014-01-02 08:07:18','2014-01-13 18:11:41','9'),
('42','iure','1983-02-02 03:53:33','17','2','10','1973-02-07 20:20:09','1974-07-22 14:06:13','10'),
('43','molestiae','1979-05-11 08:50:02','18','3','11','1979-07-01 13:07:45','2008-06-30 11:11:56','11'),
('44','sequi','2009-08-02 16:52:28','19','4','12','1988-11-05 00:16:57','2000-01-01 23:38:55','12'),
('45','voluptatem','2012-03-18 07:06:43','20','5','13','1970-05-07 20:47:30','2000-04-17 22:42:40','13'),
('46','ea','1995-02-25 12:14:40','21','6','9','1976-10-04 20:10:17','2017-03-12 03:58:13','9'),
('47','fugit','1995-05-05 21:00:04','22','7','10','1980-08-14 09:54:50','1994-09-30 19:57:20','10'),
('48','optio','2003-06-29 22:15:24','23','8','11','1985-11-28 06:00:50','2003-09-20 17:12:29','11'),
('49','exercitationem','2008-10-05 07:41:04','24','9','12','2002-05-09 23:48:11','1999-01-07 06:12:10','12'),
('50','aspernatur','2015-01-14 18:30:35','25','10','13','1977-05-10 17:15:21','2003-01-06 16:58:30','13'),
('51','est','1977-09-29 00:59:24','1','1','9','2010-01-20 11:02:57','1972-06-08 05:24:56','9'),
('52','iusto','1976-12-08 02:01:11','2','2','10','2017-10-07 21:50:36','2006-04-05 19:44:37','10'),
('53','aperiam','1987-01-04 16:52:35','3','3','11','2018-04-25 05:12:04','1980-08-14 23:00:27','11'),
('54','neque','2011-11-14 04:59:15','4','4','12','2008-06-17 02:13:18','1972-05-16 03:48:11','12'),
('55','impedit','2001-03-18 03:01:12','5','5','13','2003-11-29 13:14:46','1970-02-08 16:22:51','13'),
('56','deleniti','1978-06-27 00:00:46','6','6','9','1993-04-27 17:00:29','2011-05-01 14:03:12','9'),
('57','non','2011-05-23 21:25:12','7','7','10','1982-04-13 05:45:45','1978-09-05 21:54:33','10'),
('58','odit','2000-07-23 00:08:42','8','8','11','1971-11-30 03:30:22','2001-04-15 10:44:37','11'),
('59','nisi','1995-09-18 08:48:58','9','9','12','1992-08-09 02:52:01','1990-04-10 08:33:35','12'),
('60','quia','1992-03-23 20:39:48','10','10','13','1989-06-28 10:18:51','1971-06-24 15:19:35','13'),
('61','omnis','1985-04-28 05:53:55','11','1','9','1991-12-29 13:22:46','1987-12-01 00:04:22','9'),
('62','amet','1970-02-14 16:20:58','12','2','10','2012-06-14 23:56:50','1984-07-15 17:00:54','10'),
('63','nulla','1987-07-12 02:16:09','13','3','11','1991-05-18 00:04:38','1982-03-01 07:13:45','11'),
('64','maxime','2011-07-09 12:34:49','14','4','12','1983-09-15 23:13:50','1981-12-27 01:03:34','12'),
('65','deserunt','1980-08-20 06:24:05','15','5','13','2006-05-17 18:44:44','1971-09-26 15:13:49','13'),
('66','repudiandae','1983-03-27 06:56:19','16','6','9','1984-12-21 20:50:29','2014-05-03 12:51:40','9'),
('67','quisquam','1983-10-18 22:13:00','17','7','10','2007-02-23 02:17:06','2014-07-10 20:23:32','10'),
('68','et','2005-10-23 17:17:43','18','8','11','1971-07-19 00:05:52','2004-09-12 18:48:33','11'),
('69','eligendi','1977-06-10 13:56:41','19','9','12','1990-01-27 14:01:33','2008-03-25 10:40:48','12'),
('70','nostrum','1981-08-21 01:46:21','20','10','13','2008-08-25 14:23:09','1984-10-27 18:31:13','13'),
('71','similique','2014-06-07 01:59:28','21','1','9','1976-05-28 12:57:03','2012-07-28 21:14:18','9'),
('72','totam','1996-07-25 05:45:05','22','2','10','2009-08-09 15:56:17','2012-11-18 12:35:05','10'),
('73','iusto','1985-08-16 00:14:12','23','3','11','1979-09-24 10:03:34','1999-09-03 22:46:14','11'),
('74','soluta','1993-08-28 17:34:15','24','4','12','1981-03-02 10:37:26','2015-01-10 14:16:44','12'),
('75','vero','2015-12-19 21:19:14','25','5','13','1983-03-15 21:05:48','1973-11-10 08:00:26','13'),
('76','omnis','1972-11-13 04:35:20','1','6','9','1972-12-06 03:52:23','2008-08-06 11:08:40','9'),
('77','natus','2005-10-09 12:17:16','2','7','10','1996-08-20 08:07:31','2006-11-20 06:27:30','10'),
('78','inventore','1984-09-10 16:43:57','3','8','11','2018-10-02 06:29:14','1975-08-27 10:16:08','11'),
('79','expedita','1994-03-01 17:10:35','4','9','12','1992-11-09 15:58:31','2006-07-07 14:48:16','12'),
('80','illo','2016-05-24 09:02:41','5','10','13','2014-05-14 14:26:29','1990-06-18 11:00:56','13'),
('81','debitis','2003-09-25 03:34:04','6','1','9','1979-08-27 15:25:03','1995-11-04 13:24:27','9'),
('82','eligendi','2001-10-01 19:43:59','7','2','10','1997-07-24 21:46:07','1995-12-21 06:30:57','10'),
('83','beatae','1985-02-17 03:03:14','8','3','11','1978-09-12 19:31:21','2004-06-25 15:00:15','11'),
('84','est','2017-09-19 02:01:49','9','4','12','1983-08-20 13:47:41','1981-08-29 08:37:37','12'),
('85','omnis','2018-11-06 08:43:32','10','5','13','2014-09-17 08:36:05','1972-07-20 08:37:56','13'),
('86','atque','2017-08-01 04:20:16','11','6','9','2015-03-18 17:42:37','1977-11-28 12:22:17','9'),
('87','mollitia','1979-04-02 22:59:04','12','7','10','1985-09-15 10:08:19','2007-02-05 15:16:00','10'),
('88','sint','1983-06-21 20:48:44','13','8','11','1972-04-19 05:02:24','1977-07-18 20:46:28','11'),
('89','nemo','1971-04-24 15:12:22','14','9','12','2003-04-01 07:16:56','1998-09-17 15:34:13','12'),
('90','dolor','1991-01-13 18:32:26','15','10','13','1976-05-27 16:58:37','1984-01-28 14:48:50','13'),
('91','et','2005-10-13 11:03:35','16','1','9','2005-09-07 14:06:00','1983-11-23 19:18:54','9'),
('92','ipsa','1981-12-19 11:50:06','17','2','10','1987-12-01 21:24:17','2001-04-30 01:48:04','10'),
('93','recusandae','2016-07-11 06:28:14','18','3','11','2000-05-28 02:57:34','1974-11-24 17:15:43','11'),
('94','corrupti','2013-02-01 09:47:48','19','4','12','1995-04-24 22:55:00','2017-02-07 17:17:47','12'),
('95','laudantium','1974-12-18 07:03:04','20','5','13','1991-12-06 06:37:18','1979-03-28 04:05:21','13'),
('96','nemo','2003-01-01 08:56:35','21','6','9','2005-09-22 18:12:42','1974-05-24 19:32:49','9'),
('97','ex','2012-10-27 13:45:06','22','7','10','1991-12-09 17:34:18','2015-12-21 00:30:30','10'),
('98','assumenda','2013-05-19 17:58:02','23','8','11','1975-01-11 08:28:11','1976-03-27 21:27:37','11'),
('99','est','1979-04-02 11:54:35','24','9','12','2019-03-26 17:33:50','1993-05-21 14:09:34','12'),
('100','maiores','2002-05-02 05:12:54','25','10','13','1998-01-12 05:55:52','2002-02-11 17:05:19','13'); 



DROP TABLE IF EXISTS `documents`;
CREATE TABLE `documents` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(150) COLLATE utf8_unicode_ci DEFAULT NULL,
  `language_id` bigint(20) unsigned NOT NULL,
  `revision_id` bigint(20) unsigned NOT NULL,
  `revision_status_id` bigint(20) unsigned NOT NULL,
  `discipline_id` bigint(20) unsigned NOT NULL,
  `incoming_trm_id` bigint(20) unsigned DEFAULT NULL,
  `review_trm_id` bigint(20) unsigned DEFAULT NULL,
  `afc_trm_id` bigint(20) unsigned DEFAULT NULL,
  `stamp_status` tinyint(1) DEFAULT NULL,
  `hc_trm_id` bigint(20) unsigned DEFAULT NULL,
  INDEX document_land_rev_idx(name, language_id, revision_id),
  FOREIGN KEY (language_id) REFERENCES languages(id)
      	ON UPDATE CASCADE
    	ON DELETE restrict,
  FOREIGN KEY (revision_id) REFERENCES revisions(id)
      	ON UPDATE CASCADE
    	ON DELETE restrict,
  FOREIGN KEY (revision_status_id) REFERENCES rev_statuses(id)
      	ON UPDATE CASCADE
    	ON DELETE restrict,
  FOREIGN KEY (discipline_id) REFERENCES disciplines(id)
      	ON UPDATE CASCADE
    	ON DELETE restrict,
  FOREIGN KEY (incoming_trm_id) REFERENCES incoming_trms(id)
      	ON UPDATE CASCADE
    	ON DELETE restrict,
  FOREIGN KEY (review_trm_id) REFERENCES review_trms(id)
      	ON UPDATE CASCADE
    	ON DELETE restrict,
  FOREIGN KEY (afc_trm_id) REFERENCES afc_trms(id)
      	ON UPDATE CASCADE
    	ON DELETE restrict,
  FOREIGN KEY (hc_trm_id) REFERENCES hc_trms(id)
      	ON UPDATE CASCADE
    	ON DELETE restrict,
  PRIMARY KEY (`id`),
  KEY `documents_name_language_revision_idx` (`name`,`language_id`,`revision_id`)
) ENGINE=InnoDB AUTO_INCREMENT=251 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO `documents` VALUES ('1','71.37.94.156','9','9','9','9','1',null,'1','0','1'),
('2','49.215.94.40','10','10','10','10','2','2','2','1','2'),
('3','182.56.255.99','11','11','11','11','3','3','3','1','3'),
('4','22.182.34.88','12','12','9','12','4','4','4','1','4'),
('5','6.7.175.176','13','13','10','13','5','5','5','0','5'),
('6','57.87.61.38','9','14','11','14','6','6','6','1','6'),
('7','67.40.92.132','10','15','9','15','7','7','7','1','7'),
('8','28.88.116.203','11','16','10','16','8','8','8','0','8'),
('9','119.28.115.107','12','17','11','17','9','9','9','1','9'),
('10','34.127.150.225','13','18','9','18','10','10','10','1','10'),
('11','211.168.48.70','9','19','10','9','11','11','11','0','11'),
('12','251.201.5.170','10','20','11','10','12','12','12','0','12'),
('13','23.7.31.209','11','21','9','11','13','13','13','1','13'),
('14','216.74.5.208','12','22','10','12','14','14','14','1','14'),
('15','67.234.162.76','13','23','11','13','15','15','15','1','15'),
('16','140.206.31.156','9','24','9','14','16','16','16','0','16'),
('17','141.84.226.28','10','25','10','15','17','17','17','0','17'),
('18','69.19.127.43','11','26','11','16','18','18','18','1','18'),
('19','72.187.28.77','12','27','9','17','19','19','19','1','19'),
('20','74.212.117.234','13','28','10','18','20','20','20','0','20'),
('21','217.110.212.23','9','29','11','9','21','21','21','1','21'),
('22','87.71.114.123','10','30','9','10','22','22','22','1','22'),
('23','34.145.51.66','11','31','10','11','23','23','23','0','23'),
('24','30.36.176.96','12','32','11','12','24','24','24','0','24'),
('25','86.81.108.131','13','33','9','13','25','25','25','1','25'),
('26','220.232.177.213','9','34','10','14','26','26','1','1','1'),
('27','77.102.123.168','10','35','11','15','27','27','2','1','2'),
('28','235.131.49.59','11','36','9','16','28','28','3','0','3'),
('29','202.46.60.53','12','37','10','17','29','29','4','1','4'),
('30','204.87.233.152','13','38','11','18','30','30','5','1','5'),
('31','74.121.39.161','9','39','9','9','31','31','6','1','6'),
('32','184.31.79.86','10','40','10','10','32','32','7','0','7'),
('33','52.73.74.207','11','41','11','11','33','33','8','0','8'),
('34','199.182.191.112','12','42','9','12','34',null,'9','1','9'),
('35','105.165.98.145','13','43','10','13','35','35','10','1','10'),
('36','2.63.202.87','9','44','11','14','36','36','11','0','11'),
('37','195.83.120.40','10','45','9','15','37','37','12','0','12'),
('38','80.70.31.178','11','46','10','16','38','38','13','1','13'),
('39','101.12.128.176','12','47','11','17','39','39','14','1','14'),
('40','245.149.54.102','13','48','9','18','40','40','15','0','15'),
('41','57.86.88.195','9','49','10','9','41','41','16','1','16'),
('42','135.1.211.173','10','50','11','10','42','42','17','1','17'),
('43','223.68.245.214','11','51','9','11','43','43','18','1','18'),
('44','172.240.57.58','12','52','10','12','44','44','19','0','19'),
('45','18.219.148.121','13','53','11','13','45','45','20','1','20'),
('46','220.175.39.110','9','54','9','14','46','46','21','1','21'),
('47','53.99.241.138','10','55','10','15','47','47','22','1','22'),
('48','112.49.56.225','11','56','11','16','48','48','23','0','23'),
('49','69.41.186.234','12','57','9','17','49','49','24','0','24'),
('50','154.49.44.146','13','58','10','18','50','50','25','1','25'),
('51','66.218.93.145','9','9','11','9','51','51','1','0','1'),
('52','29.90.202.134','10','10','9','10','52','52','2','1','2'),
('53','2.114.55.69','11','11','10','11','53',null,'3','1','3'),
('54','182.108.191.169','12','12','11','12','54','54','4','1','4'),
('55','95.92.226.44','13','13','9','13','55','55','5','1','5'),
('56','116.202.2.195','9','14','10','14','56','56','6','1','6'),
('57','30.109.127.45','10','15','11','15','57','57','7','0','7'),
('58','84.38.25.26','11','16','9','16','58','58','8','0','8'),
('59','213.65.163.239','12','17','10','17','59','59','9','1','9'),
('60','73.7.219.189','13','18','11','18','60','60','10','0','10'),
('61','133.190.123.64','9','19','9','9','61','61','11','1','11'),
('62','100.212.255.41','10','20','10','10','62','62','12','0','12'),
('63','31.159.225.6','11','21','11','11','63','63','13','0','13'),
('64','50.109.24.42','12','22','9','12','64','64','14','1','14'),
('65','32.30.148.253','13','23','10','13','65','65','15','1','15'),
('66','235.251.28.247','9','24','11','14','66','66','16','0','16'),
('67','131.130.150.39','10','25','9','15','67','67','17','0','17'),
('68','52.85.218.23','11','26','10','16','68','68','18','1','18'),
('69','22.14.85.128','12','27','11','17','69','69','19','1','19'),
('70','125.52.38.172','13','28','9','18','70','70','20','0','20'),
('71','219.134.252.213','9','29','10','9','71','71','21','0','21'),
('72','167.8.57.16','10','30','11','10','72','72','22','1','22'),
('73','33.149.26.89','11','31','9','11','73','73','23','0','23'),
('74','119.132.55.61','12','32','10','12','74','74','24','1','24'),
('75','150.138.21.137','13','33','11','13','75','75','25','0','25'),
('76','254.236.128.202','9','34','9','14','76','76','1','1','1'),
('77','187.206.166.50','10','35','10','15','77','77','2','1','2'),
('78','144.131.37.42','11','36','11','16','78',null,'3','0','3'),
('79','165.157.191.22','12','37','9','17','79','79','4','1','4'),
('80','29.17.36.141','13','38','10','18','80','80','5','1','5'),
('81','146.136.193.56','9','39','11','9','81','81','6','0','6'),
('82','50.119.217.124','10','40','9','10','82','82','7','1','7'),
('83','134.149.39.206','11','41','10','11','83','83','8','0','8'),
('84','88.225.8.190','12','42','11','12','84','84','9','1','9'),
('85','156.246.96.221','13','43','9','13','85','85','10','1','10'),
('86','176.123.139.145','9','44','10','14','86','86','11','0','11'),
('87','252.217.215.247','10','45','11','15','87','87','12','0','12'),
('88','187.59.171.234','11','46','9','16','88','88','13','0','13'),
('89','11.122.206.55','12','47','10','17','89','89','14','0','14'),
('90','117.131.75.41','13','48','11','18','90','90','15','1','15'),
('91','115.197.122.0','9','49','9','9','91','91','16','0','16'),
('92','43.203.3.169','10','50','10','10','92','92','17','1','17'),
('93','189.19.19.14','11','51','11','11','93','93','18','0','18'),
('94','29.179.182.92','12','52','9','12','94','94','19','0','19'),
('95','190.54.211.253','13','53','10','13','95','95','20','0','20'),
('96','237.20.181.55','9','54','11','14','96','96','21','0','21'),
('97','45.94.241.131','10','55','9','15','97','97','22','0','22'),
('98','141.128.60.130','11','56','10','16','98','98','23','0','23'),
('99','156.2.207.21','12','57','11','17','99','99','24','0','24'),
('100','242.77.96.79','13','58','9','18','100','100','25','1','25'),
('101','66.35.209.105','9','9','10','9','1','1','1','0','1'),
('102','224.57.30.147','10','10','11','10','2','2','2','0','2'),
('103','143.236.109.184','11','11','9','11','3','3','3','0','3'),
('104','21.180.48.161','12','12','10','12','4','4','4','0','4'),
('105','219.18.238.203','13','13','11','13','5','5','5','1','5'),
('106','93.41.203.254','9','14','9','14','6','6','6','1','6'),
('107','69.150.23.196','10','15','10','15','7','7','7','0','7'),
('108','106.33.165.250','11','16','11','16','8','8','8','1','8'),
('109','50.85.34.64','12','17','9','17','9','9','9','1','9'),
('110','162.253.88.119','13','18','10','18','10','10','10','1','10'),
('111','255.4.70.177','9','19','11','9','11','11','11','1','11'),
('112','41.162.55.138','10','20','9','10','12','12','12','0','12'),
('113','59.47.124.56','11','21','10','11','13','13','13','1','13'),
('114','188.90.133.127','12','22','11','12','14','14','14','0','14'),
('115','188.244.139.232','13','23','9','13','15','15','15','0','15'),
('116','32.183.203.245','9','24','10','14','16','16','16','1','16'),
('117','212.101.184.6','10','25','11','15','17','17','17','0','17'),
('118','152.248.143.215','11','26','9','16','18','18','18','0','18'),
('119','128.222.217.85','12','27','10','17','19','19','19','1','19'),
('120','12.224.116.66','13','28','11','18','20','20','20','1','20'),
('121','212.249.153.187','9','29','9','9','21','21','21','1','21'),
('122','66.215.233.30','10','30','10','10','22','22','22','1','22'),
('123','161.60.245.17','11','31','11','11','23','23','23','0','23'),
('124','78.230.204.158','12','32','9','12','24','24','24','1','24'),
('125','88.102.16.69','13','33','10','13','25','25','25','1','25'),
('126','87.217.6.8','9','34','11','14','26','26','1','0','1'),
('127','161.27.181.64','10','35','9','15','27','27','2','0','2'),
('128','95.14.225.192','11','36','10','16','28','28','3','1','3'),
('129','239.9.105.190','12','37','11','17','29','29','4','1','4'),
('130','252.170.157.4','13','38','9','18','30','30','5','0','5'),
('131','215.102.50.35','9','39','10','9','31','31','6','1','6'),
('132','142.92.47.115','10','40','11','10','32','32','7','1','7'),
('133','175.107.131.253','11','41','9','11','33','33','8','0','8'),
('134','141.85.58.67','12','42','10','12','34','34','9','0','9'),
('135','45.31.20.216','13','43','11','13','35','35','10','1','10'),
('136','134.86.127.52','9','44','9','14','36','36','11','1','11'),
('137','224.75.29.62','10','45','10','15','37','37','12','1','12'),
('138','191.124.54.212','11','46','11','16','38','38','13','0','13'),
('139','85.90.233.233','12','47','9','17','39','39','14','1','14'),
('140','36.103.26.26','13','48','10','18','40','40','15','0','15'),
('141','182.4.115.192','9','49','11','9','41','41','16','0','16'),
('142','122.130.237.53','10','50','9','10','42','42','17','0','17'),
('143','90.168.43.175','11','51','10','11','43','43','18','0','18'),
('144','240.138.136.45','12','52','11','12','44','44','19','1','19'),
('145','56.35.247.85','13','53','9','13','45','45','20','1','20'),
('146','51.166.125.110','9','54','10','14','46','46','21','1','21'),
('147','94.151.124.10','10','55','11','15','47','47','22','0','22'),
('148','181.132.217.65','11','56','9','16','48','48','23','0','23'),
('149','36.103.93.103','12','57','10','17','49','49','24','1','24'),
('150','68.142.147.245','13','58','11','18','50','50','25','0','25'),
('151','157.77.88.253','9','9','9','9','51','51','1','0','1'),
('152','175.33.169.254','10','10','10','10','52','52','2','1','2'),
('153','95.107.121.155','11','11','11','11','53','53','3','1','3'),
('154','169.175.87.180','12','12','9','12','54','54','4','0','4'),
('155','240.122.131.231','13','13','10','13','55','55','5','1','5'),
('156','87.85.200.128','9','14','11','14','56','56','6','0','6'),
('157','171.33.39.216','10','15','9','15','57','57','7','1','7'),
('158','222.205.250.63','11','16','10','16','58','58','8','1','8'),
('159','111.49.119.195','12','17','11','17','59','59','9','1','9'),
('160','87.113.135.5','13','18','9','18','60','60','10','1','10'),
('161','128.247.25.191','9','19','10','9','61','61','11','0','11'),
('162','95.221.148.5','10','20','11','10','62','62','12','1','12'),
('163','108.210.85.48','11','21','9','11','63','63','13','0','13'),
('164','60.220.242.110','12','22','10','12','64','64','14','0','14'),
('165','34.49.38.88','13','23','11','13','65','65','15','0','15'),
('166','204.244.83.235','9','24','9','14','66','66','16','0','16'),
('167','2.19.255.63','10','25','10','15','67','67','17','1','17'),
('168','130.246.129.9','11','26','11','16','68','68','18','1','18'),
('169','6.197.143.189','12','27','9','17','69','69','19','1','19'),
('170','214.152.26.91','13','28','10','18','70','70','20','1','20'),
('171','220.30.80.151','9','29','11','9','71','71','21','1','21'),
('172','159.184.57.229','10','30','9','10','72','72','22','0','22'),
('173','200.13.142.108','11','31','10','11','73','73','23','0','23'),
('174','14.17.193.224','12','32','11','12','74','74','24','0','24'),
('175','95.159.122.159','13','33','9','13','75','75','25','1','25'),
('176','168.116.233.2','9','34','10','14','76','76','1','1','1'),
('177','33.148.128.48','10','35','11','15','77','77','2','0','2'),
('178','9.202.176.31','11','36','9','16','78','78','3','0','3'),
('179','223.205.51.15','12','37','10','17','79','79','4','1','4'),
('180','67.75.42.20','13','38','11','18','80','80','5','0','5'),
('181','0.111.132.35','9','39','9','9','81','81','6','0','6'),
('182','104.116.55.230','10','40','10','10','82','82','7','1','7'),
('183','198.216.227.239','11','41','11','11','83','83','8','0','8'),
('184','195.34.224.147','12','42','9','12','84','84','9','0','9'),
('185','193.202.57.156','13','43','10','13','85','85','10','0','10'),
('186','249.201.212.121','9','44','11','14','86','86','11','0','11'),
('187','136.250.165.25','10','45','9','15','87','87','12','1','12'),
('188','92.75.96.198','11','46','10','16','88','88','13','0','13'),
('189','162.27.155.13','12','47','11','17','89','89','14','0','14'),
('190','236.245.58.98','13','48','9','18','90','90','15','1','15'),
('191','244.220.22.152','9','49','10','9','91','91','16','1','16'),
('192','129.139.22.158','10','50','11','10','92','92','17','1','17'),
('193','141.177.225.54','11','51','9','11','93','93','18','0','18'),
('194','101.237.43.43','12','52','10','12','94','94','19','0','19'),
('195','3.6.118.93','13','53','11','13','95','95','20','1','20'),
('196','101.190.63.47','9','54','9','14','96','96','21','1','21'),
('197','18.107.43.203','10','55','10','15','97','97','22','1','22'),
('198','1.148.86.232','11','56','11','16','98','98','23','1','23'),
('199','236.164.116.217','12','57','9','17','99','99','24','1','24'),
('200','213.15.121.195','13','58','10','18','100','100','25','1','25'),
('201','81.83.218.111','9','9','11','9','1','1','1','1','1'),
('202','6.100.32.41','10','10','9','10','2','2','2','1','2'),
('203','142.236.206.5','11','11','10','11','3','3','3','1','3'),
('204','6.84.167.36','12','12','11','12','4','4','4','1','4'),
('205','4.102.92.151','13','13','9','13','5','5','5','0','5'),
('206','216.34.239.189','9','14','10','14','6','6','6','1','6'),
('207','154.104.157.215','10','15','11','15','7','7','7','0','7'),
('208','16.67.161.251','11','16','9','16','8','8','8','1','8'),
('209','41.49.142.151','12','17','10','17','9','9','9','0','9'),
('210','70.25.216.121','13','18','11','18','10','10','10','1','10'),
('211','39.191.66.240','9','19','9','9','11','11','11','0','11'),
('212','199.185.15.177','10','20','10','10','12','12','12','1','12'),
('213','184.115.10.252','11','21','11','11','13','13','13','0','13'),
('214','69.224.145.203','12','22','9','12','14','14','14','0','14'),
('215','144.68.251.39','13','23','10','13','15','15','15','0','15'),
('216','26.171.125.206','9','24','11','14','16','16','16','1','16'),
('217','198.13.136.209','10','25','9','15','17','17','17','0','17'),
('218','170.184.218.45','11','26','10','16','18','18','18','1','18'),
('219','153.53.169.131','12','27','11','17','19','19','19','0','19'),
('220','237.3.22.51','13','28','9','18','20','20','20','1','20'),
('221','71.135.243.169','9','29','10','9','21','21','21','0','21'),
('222','234.68.189.244','10','30','11','10','22','22','22','1','22'),
('223','146.191.101.209','11','31','9','11','23','23','23','1','23'),
('224','13.183.71.25','12','32','10','12','24','24','24','1','24'),
('225','31.44.140.15','13','33','11','13','25','25','25','1','25'),
('226','156.175.227.235','9','34','9','14','26','26','1','1','1'),
('227','178.120.49.183','10','35','10','15','27','27','2','1','2'),
('228','152.160.123.85','11','36','11','16','28','28','3','1','3'),
('229','227.205.122.228','12','37','9','17','29','29','4','1','4'),
('230','185.85.56.136','13','38','10','18','30','30','5','0','5'),
('231','171.14.228.51','9','39','11','9','31','31','6','1','6'),
('232','228.161.241.219','10','40','9','10','32','32','7','1','7'),
('233','105.173.42.127','11','41','10','11','33','33','8','0','8'),
('234','200.184.215.194','12','42','11','12','34','34','9','1','9'),
('235','163.156.132.201','13','43','9','13','35','35','10','1','10'),
('236','193.60.1.231','9','44','10','14','36','36','11','0','11'),
('237','211.197.106.81','10','45','11','15','37','37','12','0','12'),
('238','246.129.66.143','11','46','9','16','38','38','13','1','13'),
('239','74.132.249.205','12','47','10','17','39','39','14','1','14'),
('240','52.65.237.81','13','48','11','18','40','40','15','1','15'),
('241','162.201.223.67','9','49','9','9','41','41','16','1','16'),
('242','204.114.148.132','10','50','10','10','42','42','17','1','17'),
('243','36.139.236.197','11','51','11','11','43','43','18','0','18'),
('244','28.101.119.106','12','52','9','12','44','44','19','1','19'),
('245','229.202.46.127','13','53','10','13','45','45','20','1','20'),
('246','81.41.178.15','9','54','11','14','46','46','21','1','21'),
('247','243.96.42.193','10','55','9','15','47','47','22','1','22'),
('248','226.63.120.102','11','56','10','16','48','48','23','0','23'),
('249','49.16.187.226','12','57','11','17','49','49','24','1','24'),
('250','220.194.224.123','13','58','9','18','50','50','25','1','25'); 


-- «апрос дл€ вывода полной таблицы этапов передачи документов

select d.id, d.name, lang.`language`, rev.revision, revst.status, disc.discipline, inc.name, rtrm.name, atrm.name, stamp_status, hctrm.name
from documents as d
left join incoming_trms as inc on inc.id = d.incoming_trm_id
left join review_trms as rtrm on rtrm.id = d.review_trm_id
left join languages as lang on lang.id = d.language_id
left join rev_statuses as revst on revst.id = d.revision_status_id
left join revisions as rev on rev.id = d.revision_id
left join disciplines as disc on disc.id = d.discipline_id
left join afc_trms as atrm on atrm.id = d.afc_trm_id
left join hc_trms as hctrm on hctrm.id = d.hc_trm_id

-- «апросы очищает пол€ с кодом рассмотрени€ и с датой завершени€ рассмотрени€ ошибочно заполненные при генерации

update review_trms
SET fact_rev_date = null, review_code_id = '14'
where review_trms.review_status_id in ('11', '12');

-- «апрос дл€ вывода нагрузки на распредел€ющих

select concat(c.firstname, ' ', c.lastname) as Contributor, count(itrm.name) as IncomingTRM
from contributors as c
left join incoming_trms as itrm on itrm.contributor_id = c.id
group by Contributor;


-- ѕредставление дл€ вывода просроченых задач на рассмотрении у ќтветственных

create view Overdue_List as
select concat(c.firstname, ' ', c.lastname) as Custodian, disc.discipline, rtrm.name, rtrm.plan_rev_date, rtrm.fact_rev_date, rvc.code, rst.status
from documents as d
left join disciplines as disc on disc.id = d.discipline_id
left join custodians as c on disc.id = c.discipline_id
left join review_trms as rtrm on rtrm.id = d.review_trm_id
left join review_statuses as rst on rst.id = rtrm.review_status_id
left join review_codes as rvc on rvc.id = rtrm.review_code_id
where rtrm.plan_rev_date < NOW() and rtrm.review_code_id = '14' 
order by Custodian;


-- ѕредставление дл€ вывода отчета по просроченным задачам у ќтветственных

create view Overdue as
select concat(c.firstname, ' ', c.lastname) as Custodian, disc.discipline, count(rtrm.name) as Overdue
from documents as d
left join disciplines as disc on disc.id = d.discipline_id
left join custodians as c on disc.id = c.discipline_id
left join review_trms as rtrm on rtrm.id = d.review_trm_id
where rtrm.plan_rev_date < NOW() and rtrm.review_code_id = '14' 
group by Custodian;



-- “риггер мен€ет статус рассмотрени€ на завершенный и ставит дату 
-- простановки кода при смене значени€ пол€ review_code_id на любое кроме "Under review"

drop trigger if exists RevFinished;
delimiter //
create trigger RevFinished before update on review_trms
for each row 
begin
	IF NEW.review_code_id not like '14' then
		set new.review_status_id = '13', new.fact_rev_date = now();
	end if;
end//
delimiter ;


-- ѕроцедура выводит документы которые еще не были направлены на рассмотрение

drop procedure if exists WorkdayStart;
delimiter //
create procedure WorkdayStart ()
begin
		select d.name, lang.`language`, rev.revision, revst.status, disc.discipline, inc.name
		from documents as d
		left join incoming_trms as inc on inc.id = d.incoming_trm_id
		left join review_trms as rtrm on rtrm.id = d.review_trm_id
		left join languages as lang on lang.id = d.language_id
		left join rev_statuses as revst on revst.id = d.revision_status_id
		left join revisions as rev on rev.id = d.revision_id
		left join disciplines as disc on disc.id = d.discipline_id
		where d.review_trm_id is null;
end//
delimiter ;

call `WorkdayStart`()










